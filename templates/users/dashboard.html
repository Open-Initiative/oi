{% extends "base.html" %}
ï»¿{% load i18n %}
{% load oifilters %}
{% block pagetitle %}{% trans "My projects" %}{% endblock %}
{% block title %}{% trans "My projects" %}{% endblock %}
{% block nav %}
<div class="bidaction"><form onsubmit="addTask(getValue('newproject_title'), null, '{{request.user.username}}',function(taskid){document.location = '/project/'+taskid});return false">
    {% trans "Create a new project:" %}
    <input type="image" src="/img/icons/add.png" /> <input id="newproject_title" />
</form></div>
<div class="navtitle">{% trans "My projects" %}</div>
{% regroup user.get_profile.get_observed_projects.distinct|dictsort:"state" by state as project_list %}
{% for projects in project_list %}{% if projects.list %}
<div class="treetitle"><a href="#{{projects.grouper}}" onclick="switchPrjList({{projects.grouper}})">{{OI_PRJ_STATES|get:projects.grouper}}</a></div>
{% endif %}{% endfor %}
{% endblock %}
{% comment %}contacts, network updates, blog, finance, notification!, mp!{% endcomment %}
{% block content %}
{% regroup user.get_profile.get_observed_projects.distinct|dictsort:"state" by state as project_list %}
{% for projects in project_list %}
<div class="invisible prjlist" id="prjlist{{projects.grouper}}">
{% for project in projects.list %}
{% include 'projects/project_card.html' %}
{% endfor %}
</div>
{% endfor %}
<script>
    ajaxParams = document.location.hash;
    listid = ajaxParams.substring(1) || "{{project_list.0.grouper}}";
    switchPrjList(listid);
</script>
<div class="cleared" style="width:100%"></div>
{% endblock %}
